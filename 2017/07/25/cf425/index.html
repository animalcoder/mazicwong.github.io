<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>cf425 | mazicwong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="codeforces Round #425 div2codeforces 832AA.给n和k,两人轮流拿,每次拿k个,先拿不了k个的人输,问先手能不能赢简单的相除12345678910111213141516171819202122232425262728/**********************************************************************">
<meta name="keywords" content="codeforces">
<meta property="og:type" content="article">
<meta property="og:title" content="cf425">
<meta property="og:url" content="mazicwong.github.io/2017/07/25/cf425/index.html">
<meta property="og:site_name" content="mazicwong">
<meta property="og:description" content="codeforces Round #425 div2codeforces 832AA.给n和k,两人轮流拿,每次拿k个,先拿不了k个的人输,问先手能不能赢简单的相除12345678910111213141516171819202122232425262728/**********************************************************************">
<meta property="og:updated_time" content="2017-08-02T01:14:39.284Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cf425">
<meta name="twitter:description" content="codeforces Round #425 div2codeforces 832AA.给n和k,两人轮流拿,每次拿k个,先拿不了k个的人输,问先手能不能赢简单的相除12345678910111213141516171819202122232425262728/**********************************************************************">
  
    <link rel="alternate" href="/atom.xml" title="mazicwong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mazicwong</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">记录日常</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="mazicwong.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-cf425" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/25/cf425/" class="article-date">
  <time datetime="2017-07-25T03:52:23.000Z" itemprop="datePublished">2017-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      cf425
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="codeforces-Round-425-div2"><a href="#codeforces-Round-425-div2" class="headerlink" title="codeforces Round #425 div2"></a>codeforces Round #425 div2</h1><h3 id="codeforces-832A"><a href="#codeforces-832A" class="headerlink" title="codeforces 832A"></a><a href="http://codeforces.com/problemset/problem/832/A" target="_blank" rel="external">codeforces 832A</a></h3><p>A.给n和k,两人轮流拿,每次拿k个,先拿不了k个的人输,问先手能不能赢<br>简单的相除<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*************************************************************************</span></div><div class="line">	&gt; File Name: A.cpp</div><div class="line">	&gt; Author: mazicwong</div><div class="line">	&gt; Mail: mazicwong@gmail.com</div><div class="line">	&gt; Created Time: 2017年07月24日 星期一 22时24分05秒</div><div class="line"> ************************************************************************/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line">ll n,k;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">//freopen("in","r",stdin);</span></div><div class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</div><div class="line">    ll tmp = n/k;</div><div class="line">    <span class="keyword">if</span> (tmp%<span class="number">2</span>==<span class="number">1</span>)</div><div class="line">        <span class="built_in">puts</span>(<span class="string">"YES"</span>);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="codeforces-832B"><a href="#codeforces-832B" class="headerlink" title="codeforces 832B"></a><a href="http://codeforces.com/problemset/problem/832/B" target="_blank" rel="external">codeforces 832B</a></h3><p>B.<br>题意:</p>
<blockquote>
<p>给一个字符串,再给一个包含<em>和?的模式串,<br>(</em>至多一个,表示匹配一串字符,其中的字母不能出现在第一个字符串中;<br>?匹配一个出现在第一个字符串里的字母)<br>然后n个查询,每个查询是一个串,问能否用之前的模式串来匹配他</p>
</blockquote>
<p>思路:</p>
<blockquote>
<p>没有<em>的时候,直接匹配;有</em>的时候,分成三段,<em>之前和</em>之后的两段分别匹配,<em>代表的那段单独拿出来匹配;<br>思路不难,实现起来代码好难写..试了一早上<br>/</em> WA12是前缀<em>,可以代表空串 </em>/</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*************************************************************************</span></div><div class="line">	&gt; File Name: B.cpp</div><div class="line">	&gt; Author: mazicwong</div><div class="line">	&gt; Mail: mazicwong@gmail.com</div><div class="line">	&gt; Created Time: 2017年07月24日 星期一 22时41分27秒</div><div class="line"> ************************************************************************/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="built_in">map</span>&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; mp;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    <span class="keyword">char</span> str[maxn];</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    mp.clear();</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str);</div><div class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</div><div class="line">    &#123;</div><div class="line">        mp[str[i]]=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">char</span> match[maxn];</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,match);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">int</span> len_m = <span class="built_in">strlen</span>(match);</div><div class="line">    <span class="keyword">int</span> numb,nume;</div><div class="line">    <span class="keyword">bool</span> is_star=<span class="literal">false</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len_m;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span>(match[i]==<span class="string">'*'</span>)</div><div class="line">        &#123;</div><div class="line">            is_star=<span class="literal">true</span>;</div><div class="line">            numb=i;</div><div class="line">            nume=len_m-numb<span class="number">-1</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;n;k++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">bool</span> flag=<span class="literal">true</span>;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str);</div><div class="line">        <span class="keyword">int</span> len_s = <span class="built_in">strlen</span>(str);</div><div class="line">        <span class="keyword">if</span>(is_star==<span class="literal">true</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>(len_m<span class="number">-1</span>&gt;len_s)</div><div class="line">            &#123;</div><div class="line">                flag=<span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(flag)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numb;i++)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(match[i]==<span class="string">'?'</span>)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(mp[str[i]]!=<span class="number">1</span>)</div><div class="line">                    &#123;</div><div class="line">                        flag=<span class="literal">false</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(str[i]!=match[i])</div><div class="line">                    &#123;</div><div class="line">                        flag=<span class="literal">false</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(flag)</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=numb+<span class="number">1</span>;i&lt;len_m;i++)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(match[i]==<span class="string">'?'</span>)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(mp[str[i+(len_s-nume-numb<span class="number">-1</span>)]]!=<span class="number">1</span>)</div><div class="line">                    &#123;</div><div class="line">                        flag=<span class="literal">false</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(str[i+(len_s-nume-numb<span class="number">-1</span>)]!=match[i])</div><div class="line">                    &#123;<span class="comment">//...</span></div><div class="line">                        flag=<span class="literal">false</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(flag)</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=numb;i&lt;len_s-nume;i++)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(mp[str[i]]==<span class="number">1</span>)</div><div class="line">                &#123;</div><div class="line">                    flag=<span class="literal">false</span>;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>(len_m!=len_s)</div><div class="line">            &#123;</div><div class="line">                flag=<span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span></div><div class="line">            &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len_s;i++)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(match[i]==<span class="string">'?'</span>)</div><div class="line">                    &#123;</div><div class="line">                        <span class="keyword">if</span>(mp[str[i]]==<span class="number">0</span>)</div><div class="line">                        &#123;</div><div class="line">                            flag=<span class="literal">false</span>;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">else</span></div><div class="line">                    &#123;</div><div class="line">                        <span class="keyword">if</span>(str[i]!=match[i])</div><div class="line">                        &#123;</div><div class="line">                            flag=<span class="literal">false</span>;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (flag) <span class="built_in">puts</span>(<span class="string">"YES"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="codeforces-832D-lca-rmq在线st"><a href="#codeforces-832D-lca-rmq在线st" class="headerlink" title="codeforces 832D lca+rmq在线st"></a><a href="http://codeforces.com/problemset/problem/832/D" target="_blank" rel="external">codeforces 832D lca+rmq在线st</a></h3><h2 id="题意"><a href="#题意" class="headerlink" title="题意:"></a>题意:</h2><blockquote>
<p>给一棵树，和三个点，问其中两个点到第三个点的公共路径长度的最大值是多少  </p>
</blockquote>
<p>##思路:</p>
<blockquote>
<p>三个点两两求一下LCA，肯定会有两个LCA相同。然后再分一下情况求距离即可  </p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*************************************************************************</span></div><div class="line">	&gt; File Name: 832D.cpp</div><div class="line">	&gt; Author: mazicwong</div><div class="line">	&gt; Mail: mazicwong@gmail.com</div><div class="line">	&gt; Created Time: 2017年07月30日 星期日 22时19分46秒</div><div class="line"> ************************************************************************/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> to,next;</div><div class="line">&#125;e[maxn&lt;&lt;<span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="keyword">int</span> head[maxn];</div><div class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;<span class="comment">//点数</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">    e[tot].to=v;</div><div class="line">    e[tot].next=head[u];</div><div class="line">    head[u]=tot++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//que[]:欧拉序列,即dfs遍历的顺序</span></div><div class="line"><span class="keyword">int</span> que[maxn&lt;&lt;<span class="number">1</span>];<span class="comment">//第i次dfs访问节点的编号[1..2n-1]  (vs[i])</span></div><div class="line"><span class="keyword">int</span> dep[maxn&lt;&lt;<span class="number">1</span>];<span class="comment">//第i次dfs访问节点的深度  </span></div><div class="line"><span class="keyword">int</span> fir[maxn];<span class="comment">//在que数组中i节点首次出现的下标 (id[i])</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> p[maxn&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> st[maxn&lt;&lt;<span class="number">1</span>][<span class="number">20</span>];<span class="comment">//rmq用来存的,st[i][j]从i开始的2^j个数</span></div><div class="line"><span class="keyword">int</span> vis[maxn&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    vis[u]=<span class="number">1</span>;</div><div class="line">    que[++cnt]=u;fir[u]=cnt;dep[cnt]=d;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=head[u];k!=<span class="number">-1</span>;k=e[k].next)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> v=e[k].to;</div><div class="line">        <span class="keyword">if</span> (!vis[v])</div><div class="line">        &#123;</div><div class="line">            p[v]=u;</div><div class="line">            dfs(v,d+<span class="number">1</span>);</div><div class="line">            que[++cnt]=u;dep[cnt]=d;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ST</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;<span class="comment">//ST函数,预处理st[i,j],从i开始2^j个数的最小值</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">        st[i][<span class="number">0</span>]=i;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</div><div class="line">	&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++)</div><div class="line">		&#123;</div><div class="line">            <span class="keyword">int</span> a=st[i][j<span class="number">-1</span>],b=st[i+(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][j<span class="number">-1</span>];</div><div class="line">            st[i][j]=dep[a]&lt;dep[b]?a:b;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">RMQ</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></div><div class="line">&#123;<span class="comment">//传入两个点在que[]中首次出现位置,然后返回最小值在que[]中位置</span></div><div class="line"><span class="comment">//RMQ函数,计算[l,r]中dep[]最小的</span></div><div class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>((<span class="number">1</span>&lt;&lt;(k+<span class="number">1</span>))&lt;=r-l+<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">        k++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> a=st[l][k],b=st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k];</div><div class="line">    <span class="keyword">return</span> dep[a]&lt;dep[b]?a:b;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span></div><div class="line">&#123;<span class="comment">//直接找两者中最近祖先</span></div><div class="line">    <span class="keyword">int</span> x=fir[u],y=fir[v];</div><div class="line">    <span class="keyword">if</span>(x&gt;y) swap(x,y);</div><div class="line">    <span class="keyword">int</span> ans=RMQ(x,y);</div><div class="line">    <span class="keyword">return</span> que[ans];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/********************************/</span></div><div class="line"><span class="comment">/*struct path&#123;</span></div><div class="line">	int u,v;</div><div class="line">	int lca;</div><div class="line">&#125;pa[maxn];</div><div class="line"></div><div class="line">int cmp(path x,path y)</div><div class="line">&#123;</div><div class="line">    return dep[fir[x.lca]]&gt;dep[fir[y.lca]];</div><div class="line">&#125;</div><div class="line">int used[maxn];*/</div><div class="line"><span class="comment">/********************************************/</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    tot=<span class="number">0</span>;</div><div class="line">    cnt=<span class="number">0</span>;</div><div class="line">    p[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</div><div class="line">    <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">    <span class="comment">//memset(used,0,sizeof(used));</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">depth</span><span class="params">(<span class="keyword">int</span> u)</span></span></div><div class="line">&#123;<span class="comment">//从叶子往上的深度(负数),方便计算</span></div><div class="line">    <span class="keyword">return</span> -dep[fir[u]];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span> L[<span class="number">3</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    <span class="keyword">int</span> n,q;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;q);</div><div class="line">    init();</div><div class="line">    <span class="keyword">int</span> u;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;u);</div><div class="line">        add(i,u);</div><div class="line">        add(u,i);</div><div class="line">    &#125;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">    ST(<span class="number">2</span>*n<span class="number">-1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> a,b,c;</div><div class="line">    <span class="keyword">while</span>(q--)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</div><div class="line">        L[<span class="number">0</span>]=lca(a,b);</div><div class="line">        L[<span class="number">1</span>]=lca(a,c);</div><div class="line">        L[<span class="number">2</span>]=lca(b,c);</div><div class="line">        <span class="keyword">if</span> (L[<span class="number">0</span>]==L[<span class="number">1</span>] &amp;&amp; L[<span class="number">0</span>]==L[<span class="number">2</span>])</div><div class="line">        &#123;<span class="comment">//三个lca都一样</span></div><div class="line">            ans=max(ans,depth(L[<span class="number">0</span>])-depth(a));</div><div class="line">            ans=max(ans,depth(L[<span class="number">0</span>])-depth(b));</div><div class="line">            ans=max(ans,depth(L[<span class="number">0</span>])-depth(c));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            <span class="comment">//把L[2]换成非最上面的lca,L[0]变成最上面的lca</span></div><div class="line">            <span class="keyword">if</span> (L[<span class="number">1</span>]==L[<span class="number">2</span>])<span class="comment">//ac,bc</span></div><div class="line">            &#123;</div><div class="line">                swap(a,c);</div><div class="line">                swap(L[<span class="number">0</span>],L[<span class="number">2</span>]);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (L[<span class="number">0</span>]==L[<span class="number">2</span>])<span class="comment">//ab,bc</span></div><div class="line">            &#123;</div><div class="line">                swap(a,b);</div><div class="line">                swap(L[<span class="number">1</span>],L[<span class="number">2</span>]);</div><div class="line">            &#125;</div><div class="line">            ans = max(ans,<span class="number">2</span>*depth(L[<span class="number">0</span>]) - depth(a) - depth(L[<span class="number">2</span>]));</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(L[<span class="number">2</span>]==b)</div><div class="line">            &#123;</div><div class="line">                ans=max(ans,depth(b)-depth(c));  </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(L[<span class="number">2</span>]==c)</div><div class="line">            &#123;</div><div class="line">                ans=max(ans,depth(c)-depth(b));  </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span>  </div><div class="line">                ans=max(ans,max(depth(L[<span class="number">2</span>])-depth(b),depth(L[<span class="number">2</span>])-depth(c)));  </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans+<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="mazicwong.github.io/2017/07/25/cf425/" data-id="cj6i77cb500095hscmf28rn66" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/codeforces/">codeforces</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/07/29/cf426/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          cf426
        
      </div>
    </a>
  
  
    <a href="/2017/07/23/Day2-最短路/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Day2-最短路</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFT/">FFT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCA/">LCA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RMQ/">RMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/big-data/">big data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cbrt/">cbrt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cf/">cf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/codeforces/">codeforces</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dfs/">dfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/">dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/greedy/">greedy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/homework/">homework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kuangbin/">kuangbin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plan/">plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/search/">search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/segment-tree/">segment_tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shortestPath/">shortestPath</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区间/">区间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/尺取法/">尺取法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用技巧/">常用技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树形DP/">树形DP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模板/">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度之星/">百度之星</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/邻接表/">邻接表</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/FFT/" style="font-size: 10px;">FFT</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/RMQ/" style="font-size: 10px;">RMQ</a> <a href="/tags/big-data/" style="font-size: 10px;">big data</a> <a href="/tags/cbrt/" style="font-size: 10px;">cbrt</a> <a href="/tags/cf/" style="font-size: 10px;">cf</a> <a href="/tags/codeforces/" style="font-size: 20px;">codeforces</a> <a href="/tags/dfs/" style="font-size: 10px;">dfs</a> <a href="/tags/dp/" style="font-size: 15px;">dp</a> <a href="/tags/greedy/" style="font-size: 10px;">greedy</a> <a href="/tags/homework/" style="font-size: 10px;">homework</a> <a href="/tags/kuangbin/" style="font-size: 15px;">kuangbin</a> <a href="/tags/plan/" style="font-size: 10px;">plan</a> <a href="/tags/search/" style="font-size: 10px;">search</a> <a href="/tags/segment-tree/" style="font-size: 10px;">segment_tree</a> <a href="/tags/shortestPath/" style="font-size: 10px;">shortestPath</a> <a href="/tags/区间/" style="font-size: 10px;">区间</a> <a href="/tags/尺取法/" style="font-size: 10px;">尺取法</a> <a href="/tags/常用技巧/" style="font-size: 10px;">常用技巧</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/树/" style="font-size: 10px;">树</a> <a href="/tags/树形DP/" style="font-size: 10px;">树形DP</a> <a href="/tags/模板/" style="font-size: 10px;">模板</a> <a href="/tags/百度之星/" style="font-size: 10px;">百度之星</a> <a href="/tags/邻接表/" style="font-size: 10px;">邻接表</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/19/cf429/">cf429</a>
          </li>
        
          <li>
            <a href="/2017/08/17/对拍程序/">对拍程序</a>
          </li>
        
          <li>
            <a href="/2017/08/17/各种数学/">各种数学</a>
          </li>
        
          <li>
            <a href="/2017/08/17/博弈论/">博弈论</a>
          </li>
        
          <li>
            <a href="/2017/08/17/fft/">fft</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 MazicWong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>